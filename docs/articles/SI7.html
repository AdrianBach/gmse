<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Default GMSE data structures • GMSE</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script><script src="../pkgdown.js"></script><meta property="og:title" content="Default GMSE data structures">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">GMSE</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released package">0.4.0.3</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/GMSE.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/SI1.html">The Genetic Algorithm of GMSE</a>
    </li>
    <li>
      <a href="../articles/SI2.html">Use of the gmse_apply function</a>
    </li>
    <li>
      <a href="../articles/SI3.html">Example case study in GMSE</a>
    </li>
    <li>
      <a href="../articles/SI4.html">Advanced case study options</a>
    </li>
    <li>
      <a href="../articles/SI5.html">Fisheries example integrating FLR</a>
    </li>
    <li>
      <a href="../articles/SI6.html">Management frequency and extinction risk</a>
    </li>
    <li>
      <a href="../articles/SI7.html">Default GMSE data structures</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="../../notebook/gmse_notes.html">Lab notebook</a>
</li>
<li>
  <a href="https://github.com/bradduthie/GMSE">
    <span class="fa fa-github"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Default GMSE data structures</h1>
            <h3 class="subtitle">GMSE: an R package for generalised management strategy evaluation (Supporting Information 7)</h3>
                        <h4 class="author">A. Bradley Duthie¹³, Jeremy J. Cusack¹, Isabel L. Jones¹, Jeroen Minderman¹, Erlend B. Nilsen², Rocío A. Pozo¹, O. Sarobidy Rakotonarivo¹, Bram Van Moorter², and Nils Bunnefeld¹</h4>
            
            <h4 class="date">[1] Biological and Environmental Sciences, University of Stirling, Stirling, UK [2] Norwegian Institute for Nature Research, Trondheim, Norway [3] <a href="mailto:alexander.duthie@stir.ac.uk">alexander.duthie@stir.ac.uk</a>
</h4>
      
      
      <div class="hidden name"><code>SI7.Rmd</code></div>

    </div>

    
    
<div id="the-most-important-default-gmse-data-structures" class="section level1">
<h1 class="hasAnchor">
<a href="#the-most-important-default-gmse-data-structures" class="anchor"></a>The most important (default) GMSE data structures</h1>
<p>The default sub-models of GMSE (<code>resource</code>, <code>observation</code>, <code>manager</code>, and <code>user</code>) use a small number of default data structures to hold the information needed in simulations. While these default sub-models do not necessarily need to be used in every run in GMSE (see <a href="SI2.pdf">use of</a> <code>gmse_apply</code>), they will be used in any run of the <code>gmse</code> function, and in any call of the <code>gmse_apply</code> function that does not run with entirely custom sub-models. Simulation and model inference do not require an understanding of the default data structures, but such an understanding can be especially useful when running <code>gmse_apply</code> if there is a need to extract uncommonly used information, change key simulated values (e.g., landscape properties, agent budgets, or resource movement rules, as in <a href="SI4.pdf">SI4</a>), or build custom individual-based sub-models. Here we provide a brief explanation of the following key data structures (each name below is listed as it is named in the output <code>gmse_apply</code> when <code>get_res = "Full"</code>).</p>
<ol style="list-style-type: decimal">
<li><a href="#agents"><code>AGENTS</code></a></li>
<li>
<a href="#resources"><code>resource_array</code></a> (or <code>RESOURCES</code>)</li>
<li>
<a href="#observation"><code>observation_array</code></a> (or <code>OBSERVATION</code>)</li>
<li>
<a href="#cost"><code>manager_array</code></a> (or <code>COST</code>)</li>
<li>
<a href="#action"><code>user_array</code></a> (or <code>ACTION</code>)</li>
<li><a href="#land"><code>LAND</code></a></li>
</ol>
<p>Note that these are not the only data structures used in GMSE, but they are the only ones that can be easily modified in GMSE v0.4.0.3 (see, e.g., <a href="SI4.pdf">SI4</a>), so they are the ones that we focus on here. Additionally, any custom subfunction that returns an array rather than a single value should adhere to the same structure as these defaults if any default GMSE functions are to be used in <code>gmse_apply</code>. We can investigate each data structure by running a single simulation of <code>gmse_apply</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">sim &lt;-<span class="st"> </span><span class="kw"><a href="../reference/gmse_apply.html">gmse_apply</a></span>(<span class="dt">get_res =</span> <span class="st">"Full"</span>);</code></pre></div>
<p>The full list output of <code>sim</code> holds each structure by name (in the case where two names are used, e.g., <code>resource_array</code> and <code>RESOURCES</code>, both are identical, but the lower case <code>resource_array</code> takes precedence in case of a change). Each data structure can be examined, changed, and incorporated into a new simulation (e.g., <code>new_sim &lt;- gmse_apply(old_list = sim)</code>).</p>
</div>
<div id="agents" class="section level1">
<h1 class="hasAnchor">
<a href="#agents" class="anchor"></a>1. AGENTS</h1>
<p>The <code>AGENTS</code> data structure is a two dimensional array with a fixed number of 17 columns and a number of rows that is always equal to the sum of the number of manager and users (i.e., each row is an individual agent).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">print</span>(sim$AGENTS);</code></pre></div>
<pre><code>##      [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10] [,11] [,12] [,13]
## [1,]    1    0    0    0   55   11   50    0   10     0    50     0     0
## [2,]    2    1    0    0   90   72   50    0   10     0     0     0     0
## [3,]    3    1    0    0    6    8   50    0   10     0     0     0     0
## [4,]    4    1    0    0   38   11   50    0   10     0     0     0     0
## [5,]    5    1    0    0   82   31   50    0   10     0     0     0     0
##      [,14] [,15]    [,16] [,17]
## [1,]     0     0 9530.656  1000
## [2,]     0     0    0.000  1000
## [3,]     0     0    0.000  1000
## [4,]     0     0    0.000  1000
## [5,]     0     0    0.000  1000</code></pre>
<p>In the default case above, there are five agents (one manager and four users), each represented by a unique row. Columns in the array represent the agent traits listed below.</p>
<ol style="list-style-type: decimal">
<li>ID (each agent gets a unique number)</li>
<li>Type 1 (0 indicates the manager; 1 indicates users)</li>
<li>Type 2 (currently unused)</li>
<li>Type 3 (currently unused)</li>
<li>x-location on the landscape (typically ignored)</li>
<li>y-location on the landscape (typically ignored)</li>
<li>Movement distance (typically ignored)</li>
<li>Time parameter (typically ignored)</li>
<li>Distance of vision (currently used only for managers)</li>
<li>Error parameter (currently unused)</li>
<li>Resource marking parameter (currently used only for managers)</li>
<li>Resource tally parameter (currently used only for managers)</li>
<li>Unused column 1</li>
<li>Unused column 2</li>
<li>Unused column 3</li>
<li>Yield from owned land (zero for users when default <code>land_ownership = FALSE</code>)</li>
<li>Budget</li>
</ol>
<p>It is obvious from the above list that most columns represent traits that are either typically ignored or currently not in use. This is intended to allow for easier future development of default model options and potential customisation of sub-models in <code>gmse_apply</code>. We anticipate that future versions of GMSE will contain multiple user types with unique traits and among-user interactions.</p>
</div>
<div id="resources" class="section level1">
<h1 class="hasAnchor">
<a href="#resources" class="anchor"></a>2. resource_array</h1>
<p>The <code>resource_array</code> (also accessible as <code>RESOURCES</code>) is a two dimensional array with a fixed number of 20 columns and a number of rows that is always equal to the total number of resources (each row is an individual resource). In the above simulation, <code>sim$resource_array</code> includes 1087 rows, so we only print out the first eight for illustration.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">print</span>(sim$resource_array[<span class="dv">1</span>:<span class="dv">8</span>,]);</code></pre></div>
<pre><code>##      [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10] [,11] [,12] [,13]
## [1,]    1    1    0    0   93   94   20    1    0   0.3     1     3     0
## [2,]    2    1    0    0   58   73   20    1    0   0.3     1     2     0
## [3,]    3    1    0    0   43    7   20    1    0   0.3     0     2     0
## [4,]    4    1    0    0    6   66   20    1    0   0.3     0     2     0
## [5,]    6    1    0    0   58   60   20    1    0   0.3     0     5     0
## [6,]    7    1    0    0   67   76   20    1    0   0.3     0     3     0
## [7,]    8    1    0    0   52   19   20    1    0   0.3     0     4     0
## [8,]    9    1    0    0   31   99   20    1    0   0.3     1     4     0
##      [,14] [,15] [,16] [,17] [,18] [,19] [,20]
## [1,]     0   0.5     0     0     0     0     0
## [2,]     0   0.5     0     0     0     0     0
## [3,]     0   0.5     0     0     0     0     0
## [4,]     0   0.5     0     0     0     0     0
## [5,]     0   0.5     0     0     0     0     0
## [6,]     0   0.5     0     0     0     0     0
## [7,]     0   0.5     0     0     0     0     0
## [8,]     0   0.5     0     0     0     0     0</code></pre>
<p>Columns in the resource array represent the individual resource traits listed below.</p>
<ol style="list-style-type: decimal">
<li>ID (each resource gets a unique number)</li>
<li>Type 1 (currently all resources are of type 1)</li>
<li>Type 2 (currently unused)</li>
<li>Type 3 (currently unused)</li>
<li>x-location on the landscape</li>
<li>y-location on the landscape</li>
<li>Movement distance</li>
<li>Time parameter (typically ignored)</li>
<li>Density-independent removal (i.e., death) probability</li>
<li>Growth (i.e., birth) probability</li>
<li>Offspring produced</li>
<li>Age (initial resources are given a random age between 1 and the maximum age sampled from a uniform distribution; offspring always start at age zero in their time step of birth)</li>
<li>Marking indicator (used in the observation function)</li>
<li>Tallying indicator (used in the observation function)</li>
<li>Proportion of a landscape cell the resource consumes in a time step</li>
<li>Has the resource been scared by an agent?</li>
<li>Has the resource been culled by an agent?</li>
<li>Has the resource been castrated by an agent?</li>
<li>Has the resource’s growth rate been increased by an agent?</li>
<li>Has the resource’s offspring production been increased by an agent?</li>
</ol>
<p>In the case of columns 16-20, the value is either zero (if no action has occurred), or some positive integer that matches the ID of the agent that has performed the act (e.g., if column 17 equals 3, then that means that the agent with ID = 3 culled the resource in the corresponding row; where more than one agent’s action is possible per time step – as in scaring – the integer reflects the most recently acting agent). We anticipate that future versions of gmse will contain multiple resource types, and might add columns to include additional resource traits.</p>
</div>
<div id="observation" class="section level1">
<h1 class="hasAnchor">
<a href="#observation" class="anchor"></a>3. observation_array</h1>
<p>The <code>observation_array</code> (also accessible as <code>OBSERVATION</code>) is a two dimensional array, the number of rows and columns of which depend on the type of observation being made (i.e., <code>observe_type</code>, which can take integer values from 0-3; see the <a href="https://cran.r-project.org/package=GMSE">GMSE reference manual</a> for more information about built-in observation types that are available in GMSE). The first 20 columns of <code>observation_array</code> contain the same individual resource traits as in <code>resource_array</code>, while any additional columns provide information about how and when a resource was observed. The number of rows in <code>observation_array</code> is always equal to or less than that of <code>resource_array</code>; each resource that is observed at least once is placed into one unique row, while unobserved resources are not included as rows in the <code>observation_array</code>. In <code>sim</code>, there are 50 rows, meaning that 1037 resources were not observed at all in this time step. Below, we print out the first eight rows of the observation array.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">print</span>(sim$observation_array[<span class="dv">1</span>:<span class="dv">8</span>,]);</code></pre></div>
<pre><code>##      [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10] [,11] [,12] [,13]
## [1,]    8    1    0    0   52   19   20    1    0   0.3     0     4     1
## [2,]   11    1    0    0   53   12   20    1    0   0.3     0     2     1
## [3,]   87    1    0    0   63   21   20    1    0   0.3     0     5     1
## [4,]   98    1    0    0   62    1   20    1    0   0.3     0     4     1
## [5,]  128    1    0    0   55   17   20    1    0   0.3     1     4     1
## [6,]  145    1    0    0   58   20   20    1    0   0.3     0     4     1
## [7,]  156    1    0    0   50    6   20    1    0   0.3     0     4     1
## [8,]  171    1    0    0   54    3   20    1    0   0.3     0     4     1
##      [,14] [,15] [,16] [,17] [,18] [,19] [,20] [,21] [,22]
## [1,]     0   0.5     0     0     0     0     0     0     1
## [2,]     0   0.5     0     0     0     0     0     0     1
## [3,]     0   0.5     0     0     0     0     0     0     1
## [4,]     0   0.5     0     0     0     0     0     0     1
## [5,]     0   0.5     0     0     0     0     0     0     1
## [6,]     0   0.5     0     0     0     0     0     0     1
## [7,]     0   0.5     0     0     0     0     0     0     1
## [8,]     0   0.5     0     0     0     0     0     0     1</code></pre>
<p>In the case of the default parameters, the observation array has only two additional columns; the first added column 21 is currently unused, and all values in this column are zero. The second added column 22 contains a value of 1 confirming that the resource was observed. Additional options will add different numbers of columns with different values. For example, when <code>observe_type = 0</code> (managers observe all resources on a random subset of the landscape, the size of which is determined by their distance of vision) but <code>times_observe &gt; 1</code>, managers sample more than one random subset of the landscape. A new column is added for each sampled subset, and a 1 is placed in the relevant column if the resource is observed (these collected data are then used to estimate population size). An example where <code>times_observe = 4</code> is shown below.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">sim_t0_4 &lt;-<span class="st"> </span><span class="kw"><a href="../reference/gmse_apply.html">gmse_apply</a></span>(<span class="dt">get_res =</span> <span class="st">"Full"</span>, <span class="dt">times_observe =</span> <span class="dv">4</span>);
<span class="kw">print</span>(sim_t0_4$observation_array[<span class="dv">1</span>:<span class="dv">8</span>,]);</code></pre></div>
<pre><code>##      [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10] [,11] [,12] [,13]
## [1,]   22    1    0    0   27   75   20    1    0   0.3     0     3     1
## [2,]   26    1    0    0   23   69   20    1    0   0.3     0     5     1
## [3,]   32    1    0    0   97   89   20    1    0   0.3     0     4     1
## [4,]   58    1    0    0   43    7   20    1    0   0.3     0     2     1
## [5,]   64    1    0    0   30   83   20    1    0   0.3     0     4     1
## [6,]  109    1    0    0   46    5   20    1    0   0.3     0     4     1
## [7,]  118    1    0    0    7   97   20    1    0   0.3     0     5     1
## [8,]  119    1    0    0   22   61   20    1    0   0.3     0     3     1
##      [,14] [,15] [,16] [,17] [,18] [,19] [,20] [,21] [,22] [,23] [,24]
## [1,]     0   0.5     0     0     0     0     0     0     0     0     1
## [2,]     0   0.5     0     0     0     0     0     0     0     0     1
## [3,]     0   0.5     0     0     0     0     0     0     0     1     0
## [4,]     0   0.5     0     0     0     0     0     0     1     0     0
## [5,]     0   0.5     0     0     0     0     0     0     0     0     0
## [6,]     0   0.5     0     0     0     0     0     0     1     0     0
## [7,]     0   0.5     0     0     0     0     0     0     0     1     0
## [8,]     0   0.5     0     0     0     0     0     0     0     0     1
##      [,25]
## [1,]     0
## [2,]     0
## [3,]     0
## [4,]     0
## [5,]     1
## [6,]     0
## [7,]     0
## [8,]     0</code></pre>
<p>This process simulates the data collection of resources (and potentially resource trait measurement) as might be performed by observers within the system. It therefore takes a virtual ecologist approach; this enables the integration of theory and empirical work and can improve the mechanistic understanding of social-ecological systems <span class="citation">(Zurell et al. <a href="#ref-Zurell2010">2010</a>)</span>.</p>
</div>
<div id="cost" class="section level1">
<h1 class="hasAnchor">
<a href="#cost" class="anchor"></a>4. manager_array</h1>
<p>For context, it might be easier to understand <code>manager_array</code> after reading about <code>user_array</code> <a href="#action">below</a>. The <code>manager_array</code> (also accessible as <code>COST</code>) is a three dimensional array, each layer of which corresponds to a unique agent (rows in <a href="#agents"><code>AGENT</code></a> correpond to layers in <code>manager_array</code>). Hence, in the simulation output <code>sim$manager_array</code>, there are 5 layers. Each layer in <code>manager_array</code> has 13 columns, and a number of rows that varies depending on the number of agents and resource types. As of GMSE v0.4.0.3, only the first three rows are used. Two layers of <code>sim$manager_array</code> are shown below, the first being that of the manager and the second being that of the first user.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">print</span>(sim$manager_array[,,<span class="dv">1</span>:<span class="dv">2</span>]);</code></pre></div>
<pre><code>## , , 1
## 
##        [,1]   [,2]   [,3]   [,4]   [,5]   [,6]   [,7]   [,8]   [,9]  [,10]
## [1,] 100001 100001 100001 100001 100001 100001 100001 100001 100001 100001
## [2,] 100001 100001 100001 100001 100001 100001 100001 100001 100001 100001
## [3,] 100001 100001 100001 100001 100001 100001 100001 100001     10 100001
## [4,] 100001 100001 100001 100001 100001 100001 100001 100001 100001 100001
## [5,] 100001 100001 100001 100001 100001 100001 100001 100001 100001 100001
## [6,] 100001 100001 100001 100001 100001 100001 100001 100001 100001 100001
## [7,] 100001 100001 100001 100001 100001 100001 100001 100001 100001 100001
##       [,11]  [,12]  [,13]
## [1,] 100001 100001     10
## [2,] 100001 100001     10
## [3,] 100001 100001     10
## [4,] 100001 100001 100001
## [5,] 100001 100001 100001
## [6,] 100001 100001 100001
## [7,] 100001 100001 100001
## 
## , , 2
## 
##        [,1]   [,2]   [,3]   [,4]   [,5]   [,6]   [,7]   [,8]   [,9]  [,10]
## [1,] 100001 100001 100001 100001 100001 100001 100001 100001     59 100001
## [2,] 100001 100001 100001 100001 100001 100001 100001 100001 100001 100001
## [3,] 100001 100001 100001 100001 100001 100001 100001 100001 100001 100001
## [4,] 100001 100001 100001 100001 100001 100001 100001 100001 100001 100001
## [5,] 100001 100001 100001 100001 100001 100001 100001 100001 100001 100001
## [6,] 100001 100001 100001 100001 100001 100001 100001 100001 100001 100001
## [7,] 100001 100001 100001 100001 100001 100001 100001 100001 100001 100001
##       [,11]  [,12]  [,13]
## [1,] 100001 100001     10
## [2,] 100001 100001     10
## [3,] 100001 100001 100001
## [4,] 100001 100001 100001
## [5,] 100001 100001 100001
## [6,] 100001 100001 100001
## [7,] 100001 100001 100001</code></pre>
<p>Each element in the array indicates the cost of performing a particular action. In the code, this is the cost of changing an element in <a href="#action"><code>user_array</code></a> (which has the same dimensions as <code>manager_array</code>). The minimum value in <code>sim$manager_array</code> is therefore 10, reflecting the default <code>minimum_cost</code> value of 10. The maximum value is 100001, which is one higher than the maximum allowed manager or user budget. Where a cost is 100001, actions can therefore never be performed. An explanation of the rows and columns of <code>manager_array</code> is provided <a href="#action">below</a> in the description of <code>user_array</code>.</p>
</div>
<div id="action" class="section level1">
<h1 class="hasAnchor">
<a href="#action" class="anchor"></a>5. user_array</h1>
<p>The <code>user_array</code> (also accessible as <code>ACTION</code>) is a three dimensional array, each layer of which corresponds to a unique agent. When considering the three dimensional <code>user_array</code>, it is helpful to keep in mind that each layer corresponds to the actions of a particular agent, that each column corresponds to a particular type of action, and that each row corresponds to a particular resource, agent, or group that the action will affect. The cost of performing any action in this array is held in <a href="#cost"><code>manager_array</code></a>, wherein an action’s cost in <code>manager_array</code> is held in the same array element as the action itself in <code>user_array</code>. Recall from the <a href="#cost">manager array</a> that the first layer of <code>user_array</code> corresponds to the manager actions, and that remaining layers correspond to user actions; there are therefore as many layers in <code>user_array</code> as there are agents in the model, and each row of <a href="#agents"><code>AGENTS</code></a> corresponds to equivalent layer of <code>user_array</code> (e.g., the manager agent, ID = 1, is in the first row of <code>AGENTS</code> and the first layer of <code>user_array</code>). The first two layers of <code>user_array</code> are shown below.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">print</span>(sim$user_array[,,<span class="dv">1</span>:<span class="dv">2</span>]);</code></pre></div>
<pre><code>## , , 1
## 
##      [,1] [,2] [,3] [,4]      [,5] [,6] [,7] [,8] [,9] [,10] [,11] [,12]
## [1,]   -2    1    0    0 1000.0000    0    0    0    0     0     0     0
## [2,]   -1    1    0    0    0.0000    0    0    0    0     0     0     0
## [3,]    1    1    0    0 -133.7868    0    0   10   59    10    10    10
## [4,]    2    1    0    0    0.0000    0    0    0    0     0     0     0
## [5,]    3    1    0    0    0.0000    0    0    0    0     0     0     0
## [6,]    4    1    0    0    0.0000    0    0    0    0     0     0     0
## [7,]    5    1    0    0    0.0000    0    0    0    0     0     0     0
##      [,13]
## [1,]     0
## [2,]     0
## [3,]    61
## [4,]     0
## [5,]     0
## [6,]     0
## [7,]     0
## 
## , , 2
## 
##      [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10] [,11] [,12] [,13]
## [1,]   -2    1    0    0   -1    0    0    0   16     0     0     0     0
## [2,]   -1    1    0    0    0    0    0    0    0     0     0     0     5
## [3,]    1    1    0    0    0    0    0    0    0     0     0     0     0
## [4,]    2    1    0    0    0    0    0    0    0     0     0     0     0
## [5,]    3    1    0    0    0    0    0    0    0     0     0     0     0
## [6,]    4    1    0    0    0    0    0    0    0     0     0     0     0
## [7,]    5    1    0    0    0    0    0    0    0     0     0     0     0</code></pre>
<p>Note that there are more columns in this array than there are possible actions in GMSE. This is because there are several columns that do not map to actions per se, but properties of agents. As of GMSE v0.4.0.3, these properties cannot be changed by other agents. Column of <code>user_array</code> are as follows.</p>
<ol style="list-style-type: decimal">
<li>The type of agent or resource being affected by an action. A value of -2 indicates that actions have a direct effect on a resource (e.g., scaring, culling, etc.). A value of -1 indicates that actions have a direct effect on a landscape layer. Positive integer values indicate actions that affect other agents, where each integer corresponds to the agents’ IDs. Where the integer value is identical with the agent’s own ID (e.g., row 3 in layer 1 where the element <code>sim$user_array[3, 1, 1] = 1</code>), actions affect all other agents in the model. As of GMSE v0.4.0.3, all rows except 1-3 are unused because agents do not affect one anothers actions individually; they either affect all other agents’ actions indiscriminately (in the case of the manager setting policy) or do not (directly) affect other agents’ actions at all (in the case of users). This data structure, however, is designed so that future versions of GMSE will allow users to affect one another directly (representing, e.g., different groups of agents lobbying for different interests, among-user conflict, etc.).</li>
<li>Type 1 of the agent or resource of interest (in practice, this is currently unused).</li>
<li>Type 2 of the agent or resource of interest (currently unused).</li>
<li>Type 3 of the agent or resource of interest (currently unused).</li>
<li>Utility associated with the recipient of the action. For example, in the case of the resource (row 1), positive values indicate that the agent wants more of these resources, while negative values indicate that the agent wants fewer. In the case of the manager (layer 1), the value in the first row equals <code>manage_target</code>, while the value in the third row is the change in resource number needed to achieve the target value (i.e., <code>manage_target =</code> 1000, and the manager’s estimate is <code>sim$observation_vector =</code> 1133.7868481. The former minus the latter is -133.78685).</li>
<li>Whether or not the utility associated with the recipient of the action is dependent upon that recipient being on land owned by the actor (e.g., if users only care about resources on landscape cells that they own, then this value is 1 instead of 0).</li>
<li>Whether or not actions on the recipient are possible if the recipient is not on land owned by the actor (e.g., if users cannot cull resources that are not on their own land, then this value is 1 instead of 0).</li>
<li>The number of actions performed for scaring, which in row 3 of the manager layer 1 is interpreted as the scaring cost set by the manager for users.</li>
<li>The number of actions performed for culling, which in row 3 of the manager layer 1 is interpreted as the culling cost set by the manager for users.</li>
<li>The number of actions performed for castration, which in row 3 of the manager’s layer 1 is interpreted as the castration cost set by the manager for users. Further, in row 2 for users (where column 1 equals -1), this value is instead the number of <code>tend_crop</code> actions (the number of cells on which crops are tended by users, which always is perfomed on users’ own land, cannot be affected by the manager, and always equals <code>minimum_cost</code>).</li>
<li>The number of actions performed for feeding resources (increasing their growth rate, <code>lambda</code>), which in row 3 of the manager’s layer 1 is interpreted as the feeding cost set by the manager for users. Further, in row 2 for users (where column 1 equals -1), this value is instead the number of <code>kill_crop</code> actions (the number of cells on which crops are destroyed by users, which always is perfomed on users’ own land, cannot be affected by the manager, and always equals <code>minimum_cost</code>)</li>
<li>The number of actions performed for helping resource offspring (directly increasing offspring production), which in row 3 of the manager’s layer 1 is interpreted as the helping offspring cost set by the manager for users.</li>
<li>The number of actions unspent by the user or manager; any actions allocated to this row do nothing. These may be used when any action would lead the agent to a less than desirable outcome, such as if only culling exists as a policy option (default), but managers do not want to increase the cost of culling because resource density is above <code>manage_target</code>.</li>
</ol>
<p>In the <a href="SI1.pdf">genetic algorithm</a>, values in elements of a <code>user_array</code> layer are potentially modified according to each agent’s objective, as constrained by costs in <code>manager_array</code>.</p>
</div>
<div id="land" class="section level1">
<h1 class="hasAnchor">
<a href="#land" class="anchor"></a>6. LAND</h1>
<p>Events in default GMSE sub-models occur on a spatially-explicit landscape <code>LAND</code>, which is stored as a three dimensional array. The size of this landscape is specified with the <code>land_dim_1</code> and <code>land_dim_2</code> arguments of GMSE, which determine the length, in cells, of the y and x dimensions of the landscape, respectively (e.g., if <code>land_dim_1 = 10</code> and <code>land_dim_2 = 1000</code>, then the landscape will be one very long horizontal transect). The total number of landscape cells on which resources and agents can interact is therefore the product of <code>land_dim_1</code> and <code>land_dim_2</code>. In addition, all landscapes have three layers, which hold three separate values of information for each x-y location. The first layer is unused in GMSE v0.4.0.3; the second layer holds crop production on a cell, and the third layer holds the owner of the cell (corresponding to the ID of an agent, where the manager’s ID = 0 defines public land). An <span class="math inline">\(8 \times 8\)</span> portion of the landscape from <code>sim</code> is shown below.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">print</span>(sim$LAND[<span class="dv">1</span>:<span class="dv">8</span>,<span class="dv">1</span>:<span class="dv">8</span>,]);</code></pre></div>
<pre><code>## , , 1
## 
##      [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8]
## [1,]    1    1    1    1    1    1    1    1
## [2,]    1    1    1    1    1    1    1    1
## [3,]    1    1    1    1    1    1    1    1
## [4,]    1    1    1    1    1    1    1    1
## [5,]    1    1    1    1    1    1    1    1
## [6,]    1    1    1    1    1    1    1    1
## [7,]    1    1    1    1    1    1    1    1
## [8,]    1    1    1    1    1    1    1    1
## 
## , , 2
## 
##      [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8]
## [1,] 1.00    1    1 1.00    1  1.0  1.0    1
## [2,] 0.25    1    1 1.00    1  1.0  1.0    1
## [3,] 1.00    1    1 1.00    1  0.5  1.0    1
## [4,] 1.00    1    1 0.25    1  1.0  1.0    1
## [5,] 1.00    1    1 1.00    1  1.0  1.0    1
## [6,] 0.50    1    1 1.00    1  1.0  0.5    1
## [7,] 1.00    1    1 1.00    1  1.0  1.0    1
## [8,] 1.00    1    1 1.00    1  1.0  1.0    1
## 
## , , 3
## 
##      [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8]
## [1,]    1    1    1    1    1    1    1    1
## [2,]    1    1    1    1    1    1    1    1
## [3,]    1    1    1    1    1    1    1    1
## [4,]    1    1    1    1    1    1    1    1
## [5,]    1    1    1    1    1    1    1    1
## [6,]    1    1    1    1    1    1    1    1
## [7,]    1    1    1    1    1    1    1    1
## [8,]    1    1    1    1    1    1    1    1</code></pre>
<p>In the case of the above, all of the cells in this square patch of landscape are owned by agent 1 (i.e., the manager; see <code>sim$LAND[,,3]</code>), and we can see that crop production on this patch of land has been decreased from 1 in several cells as a consequence of consumption by resources (see <code>sim$LAND[„2]</code>). In <a href="SI4.pdf">SI4</a>, we show how landscape cell values can be manipulated to customise the placement of land ownership.</p>
</div>
<div id="conclusions" class="section level1">
<h1 class="hasAnchor">
<a href="#conclusions" class="anchor"></a>Conclusions</h1>
<p>We have focused on the data structures <a href="#agents"><code>AGENTS</code></a>, <a href="#resources"><code>resource_array</code></a>, <a href="#observation"><code>observation_array</code></a>, <a href="#cost"><code>manager_array</code></a>, <a href="#action"><code>user_array</code></a>, and <a href="#land"><code>LAND</code></a> because these are the data structures that can be most readily manipulated to customise GMSE simulations. An example of how to do this within a loop using <code>gmse_apply</code> can be found in <a href="SI4.pdf">SI4</a>. While other data structures exist within GMSE (e.g., see the output of <code>gmse_apply</code> when <code>get_res = Full</code>), we do not recommend manipulating these structures for custom simulations.</p>
<p>Many data structures contain elements that are unused in GMSE v0.4.0.3, and in all cases this is designed for ease of ongoing development of new GMSE features. Requests for new features can be made on GitHub using the <a href="https://github.com/bradduthie/gmse/wiki">GMSE Wiki</a> or the <a href="https://github.com/bradduthie/gmse/issues">GMSE Issues</a> page.</p>
</div>
<div id="references" class="section level1 unnumbered">
<h1 class="hasAnchor">
<a href="#references" class="anchor"></a>References</h1>
<div id="refs" class="references">
<div id="ref-Zurell2010">
<p>Zurell, Damaris, Uta Berger, Juliano S Cabral, Florian Jeltsch, Christine N Meynard, Tamara Münkemüller, Nana Nehrbass, et al. 2010. “The virtual ecologist approach: Simulating data and observers.” <em>Oikos</em> 119 (4): 622–35. doi:<a href="https://doi.org/10.1111/j.1600-0706.2009.18284.x">10.1111/j.1600-0706.2009.18284.x</a>.</p>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#the-most-important-default-gmse-data-structures">The most important (default) GMSE data structures</a></li>
      <li><a href="#agents">1. AGENTS</a></li>
      <li><a href="#resources">2. resource_array</a></li>
      <li><a href="#observation">3. observation_array</a></li>
      <li><a href="#cost">4. manager_array</a></li>
      <li><a href="#action">5. user_array</a></li>
      <li><a href="#land">6. LAND</a></li>
      <li><a href="#conclusions">Conclusions</a></li>
      <li><a href="#references">References</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by A. Bradley Duthie, Nils Bunnefeld.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  

  </body>
</html>
